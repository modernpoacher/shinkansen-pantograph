'use strict';var _classCallCheck2=require('babel-runtime/helpers/classCallCheck'),_classCallCheck3=_interopRequireDefault(_classCallCheck2),_createClass2=require('babel-runtime/helpers/createClass'),_createClass3=_interopRequireDefault(_createClass2),_objectWithoutProperties2=require('babel-runtime/helpers/objectWithoutProperties'),_objectWithoutProperties3=_interopRequireDefault(_objectWithoutProperties2),_extends2=require('babel-runtime/helpers/extends'),_extends3=_interopRequireDefault(_extends2),_defineProperty2=require('babel-runtime/helpers/defineProperty'),_defineProperty3=_interopRequireDefault(_defineProperty2),_shinkansenRails=require('shinkansen-rails'),_shinkansenSignals=require('shinkansen-signals');Object.defineProperty(exports,'__esModule',{value:!0}),exports.Pantograph=void 0;function _interopRequireDefault(a){return a&&a.__esModule?a:{default:a}}var ALPHA={CHANGE:'ALPHA_CHANGE',FETCH:'ALPHA_FETCH',STORE:'ALPHA_STORE',QUERY:'ALPHA_QUERY'},OMEGA={CHANGE:'OMEGA_CHANGE',FETCH:'OMEGA_FETCH',STORE:'OMEGA_STORE',QUERY:'OMEGA_QUERY'},EMBARK={ROUTE:'EMBARK_ROUTE',FETCH:'EMBARK_FETCH',STORE:'EMBARK_STORE'},DEBARK={ROUTE:'DEBARK_ROUTE',FETCH:'DEBARK_FETCH',STORE:'DEBARK_STORE'},ACTION={},STORE={getState:function getState(){return{}}},HISTORY={push:function push(){},getCurrentLocation:function getCurrentLocation(){}};function REDIRECT_TO_ALPHA(a){var b=a.history,c=a.alpha,d=b.getCurrentLocation(),e=d.pathname,f=_shinkansenRails.Rails.path((0,_defineProperty3.default)({},_shinkansenSignals.Signals.ALPHA,c),_shinkansenSignals.Signals.ALPHA_PATTERN);e!==f&&b.push(f)}function REDIRECT_TO_OMEGA(a){var b,c=a.history,d=a.alpha,e=a.omega,f=c.getCurrentLocation(),g=f.pathname,h=_shinkansenRails.Rails.path((b={},(0,_defineProperty3.default)(b,_shinkansenSignals.Signals.ALPHA,d),(0,_defineProperty3.default)(b,_shinkansenSignals.Signals.OMEGA,e),b),_shinkansenSignals.Signals.OMEGA_PATTERN);g!==h&&c.push(h)}function REDIRECT_TO_EMBARK(a){var b=a.history,c=a.embark,d=b.getCurrentLocation(),e=d.pathname,f=_shinkansenRails.Rails.path((0,_defineProperty3.default)({},_shinkansenSignals.Signals.EMBARK,c),_shinkansenSignals.Signals.EMBARK_PATTERN);e!==f&&b.push(f)}function REDIRECT_TO_DEBARK(a){var b=a.history,c=a.debark,d=b.getCurrentLocation(),e=d.pathname,f=_shinkansenRails.Rails.path((0,_defineProperty3.default)({},_shinkansenSignals.Signals.DEBARK,c),_shinkansenSignals.Signals.DEBARK_PATTERN);e!==f&&b.push(f)}function REDIRECT_TO_EXCEPTION(a){var b=a.history,c=a.exception,d=b.getCurrentLocation(),e=d.pathname,f=_shinkansenRails.Rails.path((0,_defineProperty3.default)({},_shinkansenSignals.Signals.EXCEPTION,c),_shinkansenSignals.Signals.EXCEPTION_PATTERN);e!==f&&b.push(f)}function REDIRECT(a){var b=a[_shinkansenSignals.Signals.ALPHA],c=a[_shinkansenSignals.Signals.OMEGA],d=a[_shinkansenSignals.Signals.EMBARK],e=a[_shinkansenSignals.Signals.DEBARK],f=a.exception,g=a.history;if(b&&c)REDIRECT_TO_OMEGA({alpha:b,omega:c,history:g});else if(d)REDIRECT_TO_EMBARK({embark:d,history:g});else if(e)REDIRECT_TO_DEBARK({debark:e,history:g});else if(f)REDIRECT_TO_EXCEPTION({exception:f,history:g});else if(b)REDIRECT_TO_ALPHA({alpha:b,history:g});else if(c)throw Error('Pantograph encountered a route error in REDIRECT()')}function redirectFromAlpha(a){var b=a[_shinkansenSignals.Signals.ALPHA].redirect,c=a.history;b&&REDIRECT((0,_extends3.default)({},b,{history:c}))}function redirectFromOmega(a){var b=a[_shinkansenSignals.Signals.OMEGA].redirect,c=a.history;b&&REDIRECT((0,_extends3.default)({},b,{history:c}))}function redirectFromEmbark(a){var b=a[_shinkansenSignals.Signals.EMBARK].redirect,c=a.history;b&&REDIRECT((0,_extends3.default)({},b,{history:c}))}function redirectFromDebark(a){var b=a[_shinkansenSignals.Signals.DEBARK].redirect,c=a.history;b&&REDIRECT((0,_extends3.default)({},b,{history:c}))}function graphite(a){var b=a.action;b=b===void 0?ACTION:b;var c=b.type,d=(0,_objectWithoutProperties3.default)(b,['type']),e=a.store,f=e===void 0?STORE:e,g=a.history,h=g===void 0?HISTORY:g;switch(c){case'OMEGA_QUERY':{var i=f.getState();redirectFromOmega((0,_extends3.default)({},i,{history:h}))}break;case'EMBARK_ROUTE':{var j=f.getState();redirectFromEmbark((0,_extends3.default)({},j,{history:h}))}break;case'DEBARK_ROUTE':{var k=f.getState();redirectFromDebark((0,_extends3.default)({},k,{history:h}))}break;case'ALPHA_QUERY':{var l=f.getState();redirectFromAlpha((0,_extends3.default)({},l,{history:h}))}}return(0,_extends3.default)({},d,{type:c})}var Pantograph=exports.Pantograph=function(){function a(){(0,_classCallCheck3.default)(this,a)}return(0,_createClass3.default)(a,null,[{key:'ALPHA',get:function get(){return ALPHA}},{key:'OMEGA',get:function get(){return OMEGA}},{key:'EMBARK',get:function get(){return EMBARK}},{key:'DEBARK',get:function get(){return DEBARK}}]),a}();Pantograph.graphite=graphite;