'use strict';Object.defineProperty(exports,"__esModule",{value:true});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor);}}return function(Constructor,protoProps,staticProps){if(protoProps)defineProperties(Constructor.prototype,protoProps);if(staticProps)defineProperties(Constructor,staticProps);return Constructor;};}();var _shinkansenRails=require('shinkansen-rails');var _shinkansenSignals=require('shinkansen-signals');function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperty(obj,key,value){if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}var ALPHA={CHANGE:'ALPHA_CHANGE',FETCH:'ALPHA_FETCH',STORE:'ALPHA_STORE',QUERY:'ALPHA_QUERY'};var OMEGA={CHANGE:'OMEGA_CHANGE',FETCH:'OMEGA_FETCH',STORE:'OMEGA_STORE',QUERY:'OMEGA_QUERY'};var EMBARK={ROUTE:'EMBARK_ROUTE',FETCH:'EMBARK_FETCH',STORE:'EMBARK_STORE'};var DEBARK={ROUTE:'DEBARK_ROUTE',FETCH:'DEBARK_FETCH',STORE:'DEBARK_STORE'};var ACTION={};var STORE={getState:function getState(){return{};}};var HISTORY={push:function push(){},getCurrentLocation:function getCurrentLocation(){}};function REDIRECT_TO_ALPHA(_ref){var alpha=_ref.alpha,history=_ref.history;var PATHNAME=_shinkansenRails.Rails.to(_defineProperty({},_shinkansenSignals.Signals.ALPHA,alpha),_shinkansenSignals.Signals.ALPHA_PATTERN);var _history$getCurrentLo=history.getCurrentLocation(),pathname=_history$getCurrentLo.pathname;if(PATHNAME!==pathname)history.push(PATHNAME);}function REDIRECT_TO_OMEGA(_ref2){var _Rails$to2;var alpha=_ref2.alpha,omega=_ref2.omega,history=_ref2.history;var PATHNAME=_shinkansenRails.Rails.to((_Rails$to2={},_defineProperty(_Rails$to2,_shinkansenSignals.Signals.ALPHA,alpha),_defineProperty(_Rails$to2,_shinkansenSignals.Signals.OMEGA,omega),_Rails$to2),_shinkansenSignals.Signals.OMEGA_PATTERN);var _history$getCurrentLo2=history.getCurrentLocation(),pathname=_history$getCurrentLo2.pathname;if(PATHNAME!==pathname)history.push(PATHNAME);}function REDIRECT_TO_EMBARK(_ref3){var embark=_ref3.embark,history=_ref3.history;var PATHNAME=_shinkansenRails.Rails.to(_defineProperty({},_shinkansenSignals.Signals.EMBARK,embark),_shinkansenSignals.Signals.EMBARK_PATTERN);var _history$getCurrentLo3=history.getCurrentLocation(),pathname=_history$getCurrentLo3.pathname;if(PATHNAME!==pathname)history.push(PATHNAME);}function REDIRECT_TO_DEBARK(_ref4){var debark=_ref4.debark,history=_ref4.history;var PATHNAME=_shinkansenRails.Rails.to(_defineProperty({},_shinkansenSignals.Signals.DEBARK,debark),_shinkansenSignals.Signals.DEBARK_PATTERN);var _history$getCurrentLo4=history.getCurrentLocation(),pathname=_history$getCurrentLo4.pathname;if(PATHNAME!==pathname)history.push(PATHNAME);}function REDIRECT(_ref5){var _ref5$redirect=_ref5.redirect;_ref5$redirect=_ref5$redirect===undefined?{}:_ref5$redirect;var alpha=_ref5$redirect[_shinkansenSignals.Signals.ALPHA],omega=_ref5$redirect[_shinkansenSignals.Signals.OMEGA],embark=_ref5$redirect[_shinkansenSignals.Signals.EMBARK],debark=_ref5$redirect[_shinkansenSignals.Signals.DEBARK],exception=_ref5$redirect.exception,history=_ref5.history;if(alpha&&omega){REDIRECT_TO_OMEGA({alpha:alpha,omega:omega,history:history});}else if(embark){REDIRECT_TO_EMBARK({embark:embark,history:history});}else if(debark){REDIRECT_TO_DEBARK({debark:debark,history:history});}else if(alpha){REDIRECT_TO_ALPHA({alpha:alpha,history:history});}else if(omega){throw Error('Pantograph encountered a route error in REDIRECT()');}}function redirectFromAlpha(_ref6){var _ref6$state$Signals$A=_ref6.state[_shinkansenSignals.Signals.ALPHA];_ref6$state$Signals$A=_ref6$state$Signals$A===undefined?{}:_ref6$state$Signals$A;var redirect=_ref6$state$Signals$A.redirect,history=_ref6.history;if(redirect)REDIRECT({redirect:redirect,history:history});}function redirectFromOmega(_ref7){var _ref7$state$Signals$O=_ref7.state[_shinkansenSignals.Signals.OMEGA];_ref7$state$Signals$O=_ref7$state$Signals$O===undefined?{}:_ref7$state$Signals$O;var redirect=_ref7$state$Signals$O.redirect,history=_ref7.history;if(redirect)REDIRECT({redirect:redirect,history:history});}function redirectFromEmbark(_ref8){var _ref8$state$Signals$E=_ref8.state[_shinkansenSignals.Signals.EMBARK];_ref8$state$Signals$E=_ref8$state$Signals$E===undefined?{}:_ref8$state$Signals$E;var redirect=_ref8$state$Signals$E.redirect,history=_ref8.history;if(redirect)REDIRECT({redirect:redirect,history:history});}function redirectFromDebark(_ref9){var _ref9$state$Signals$D=_ref9.state[_shinkansenSignals.Signals.DEBARK];_ref9$state$Signals$D=_ref9$state$Signals$D===undefined?{}:_ref9$state$Signals$D;var redirect=_ref9$state$Signals$D.redirect,history=_ref9.history;if(redirect)REDIRECT({redirect:redirect,history:history});}function graphite(_ref10){var _ref10$action=_ref10.action;_ref10$action=_ref10$action===undefined?ACTION:_ref10$action;var type=_ref10$action.type,_ref10$store=_ref10.store,store=_ref10$store===undefined?STORE:_ref10$store,_ref10$history=_ref10.history,history=_ref10$history===undefined?HISTORY:_ref10$history;switch(type){case OMEGA.QUERY:redirectFromOmega({state:store.getState(),history:history});break;case EMBARK.ROUTE:redirectFromEmbark({state:store.getState(),history:history});break;case DEBARK.ROUTE:redirectFromDebark({state:store.getState(),history:history});break;case ALPHA.QUERY:redirectFromAlpha({state:store.getState(),history:history});break;}}var Pantograph=function(){function Pantograph(){_classCallCheck(this,Pantograph);}_createClass(Pantograph,null,[{key:'ALPHA',get:function get(){return ALPHA;}},{key:'OMEGA',get:function get(){return OMEGA;}},{key:'EMBARK',get:function get(){return EMBARK;}},{key:'DEBARK',get:function get(){return DEBARK;}}]);return Pantograph;}();Pantograph.graphite=graphite;exports.default=Pantograph;