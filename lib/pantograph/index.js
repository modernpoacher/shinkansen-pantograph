"use strict";require("core-js/modules/es.object.define-property.js");require("core-js/modules/es.symbol.iterator.js");require("core-js/modules/es.array.iterator.js");require("core-js/modules/es.string.iterator.js");require("core-js/modules/web.dom-collections.iterator.js");Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;exports.graphite=graphite;exports.redirectFromAlpha=redirectFromAlpha;exports.redirectFromConfirm=redirectFromConfirm;exports.redirectFromDebark=redirectFromDebark;exports.redirectFromEmbark=redirectFromEmbark;exports.redirectFromOmega=redirectFromOmega;exports.redirectTo=redirectTo;exports.redirectToAlpha=redirectToAlpha;exports.redirectToConfirm=redirectToConfirm;exports.redirectToDebark=redirectToDebark;exports.redirectToEmbark=redirectToEmbark;exports.redirectToOmega=redirectToOmega;require("core-js/modules/es.object.freeze.js");require("core-js/modules/es.symbol.to-primitive.js");require("core-js/modules/es.date.to-primitive.js");require("core-js/modules/es.symbol.js");require("core-js/modules/es.symbol.description.js");require("core-js/modules/es.object.to-string.js");require("core-js/modules/es.number.constructor.js");var _debug=_interopRequireDefault(require("debug"));var _shinkansenRails=require("shinkansen-rails");var _shinkansenSignals=require("shinkansen-signals");function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj};}function _typeof(obj){"@babel/helpers - typeof";return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj;}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj;},_typeof(obj);}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function");}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,_toPropertyKey(descriptor.key),descriptor);}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);Object.defineProperty(Constructor,"prototype",{writable:false});return Constructor;}function _defineProperty(obj,key,value){key=_toPropertyKey(key);if(key in obj){Object.defineProperty(obj,key,{value:value,enumerable:true,configurable:true,writable:true});}else{obj[key]=value;}return obj;}function _toPropertyKey(arg){var key=_toPrimitive(arg,"string");return _typeof(key)==="symbol"?key:String(key);}function _toPrimitive(input,hint){if(_typeof(input)!=="object"||input===null)return input;var prim=input[Symbol.toPrimitive];if(prim!==undefined){var res=prim.call(input,hint||"default");if(_typeof(res)!=="object")return res;throw new TypeError("@@toPrimitive must return a primitive value.");}return(hint==="string"?String:Number)(input);}var log=(0,_debug["default"])('shinkansen-pantograph');var ALPHA={ERROR:'ALPHA_ERROR',ROUTE:'ALPHA_ROUTE',MOUNT:'ALPHA_MOUNT',FETCH:'ALPHA_FETCH',STORE:'ALPHA_STORE',QUERY:'ALPHA_QUERY',CHANGE:'ALPHA_CHANGE',SUBMIT:'ALPHA_SUBMIT'};var OMEGA={ERROR:'OMEGA_ERROR',ROUTE:'OMEGA_ROUTE',MOUNT:'OMEGA_MOUNT',FETCH:'OMEGA_FETCH',STORE:'OMEGA_STORE',QUERY:'OMEGA_QUERY',CHANGE:'OMEGA_CHANGE',SUBMIT:'OMEGA_SUBMIT'};var EMBARK={ERROR:'EMBARK_ERROR',ROUTE:'EMBARK_ROUTE',MOUNT:'EMBARK_MOUNT',FETCH:'EMBARK_FETCH',STORE:'EMBARK_STORE',CHANGE:'EMBARK_CHANGE',SUBMIT:'EMBARK_SUBMIT'};var DEBARK={ERROR:'DEBARK_ERROR',ROUTE:'DEBARK_ROUTE',MOUNT:'DEBARK_MOUNT',FETCH:'DEBARK_FETCH',STORE:'DEBARK_STORE',CHANGE:'DEBARK_CHANGE',SUBMIT:'DEBARK_SUBMIT'};var CONFIRM={ERROR:'CONFIRM_ERROR',ROUTE:'CONFIRM_ROUTE',MOUNT:'CONFIRM_MOUNT',FETCH:'CONFIRM_FETCH',STORE:'CONFIRM_STORE',CHANGE:'CONFIRM_CHANGE',SUBMIT:'CONFIRM_SUBMIT'};var ACTION={};var STATE={};var HISTORY={push:function push(){},getCurrentLocation:function getCurrentLocation(){return{};}};function redirectToAlpha(_ref){var alpha=_ref.alpha,history=_ref.history;log('redirectToAlpha');var pathname=_shinkansenRails.Rails.to(_defineProperty({},_shinkansenSignals.Signals.ALPHA,alpha),_shinkansenSignals.Signals.ALPHA_PATTERN);var _history$getCurrentLo=history.getCurrentLocation(),currentPathname=_history$getCurrentLo.pathname;if(pathname!==currentPathname)history.push(pathname);}function redirectToOmega(_ref2){var _Rails$to2;var alpha=_ref2.alpha,omega=_ref2.omega,history=_ref2.history;log('redirectToOmega');var pathname=_shinkansenRails.Rails.to((_Rails$to2={},_defineProperty(_Rails$to2,_shinkansenSignals.Signals.ALPHA,alpha),_defineProperty(_Rails$to2,_shinkansenSignals.Signals.OMEGA,omega),_Rails$to2),_shinkansenSignals.Signals.OMEGA_PATTERN);var _history$getCurrentLo2=history.getCurrentLocation(),currentPathname=_history$getCurrentLo2.pathname;if(pathname!==currentPathname)history.push(pathname);}function redirectToEmbark(_ref3){var embark=_ref3.embark,history=_ref3.history;log('redirectToEmbark');var pathname=_shinkansenRails.Rails.to(_defineProperty({},_shinkansenSignals.Signals.EMBARK,embark),_shinkansenSignals.Signals.EMBARK_PATTERN);var _history$getCurrentLo3=history.getCurrentLocation(),currentPathname=_history$getCurrentLo3.pathname;if(pathname!==currentPathname)history.push(pathname);}function redirectToDebark(_ref4){var debark=_ref4.debark,history=_ref4.history;log('redirectToDebark');var pathname=_shinkansenRails.Rails.to(_defineProperty({},_shinkansenSignals.Signals.DEBARK,debark),_shinkansenSignals.Signals.DEBARK_PATTERN);var _history$getCurrentLo4=history.getCurrentLocation(),currentPathname=_history$getCurrentLo4.pathname;if(pathname!==currentPathname)history.push(pathname);}function redirectToConfirm(_ref5){var confirm=_ref5.confirm,history=_ref5.history;log('redirectToDebark');var pathname=_shinkansenRails.Rails.to(_defineProperty({},_shinkansenSignals.Signals.CONFIRM,confirm),_shinkansenSignals.Signals.CONFIRM_PATTERN);var _history$getCurrentLo5=history.getCurrentLocation(),currentPathname=_history$getCurrentLo5.pathname;if(pathname!==currentPathname)history.push(pathname);}function redirectTo(_ref6){var _ref6$redirect=_ref6.redirect;_ref6$redirect=_ref6$redirect===void 0?{}:_ref6$redirect;var alpha=_ref6$redirect[_shinkansenSignals.Signals.ALPHA],omega=_ref6$redirect[_shinkansenSignals.Signals.OMEGA],embark=_ref6$redirect[_shinkansenSignals.Signals.EMBARK],debark=_ref6$redirect[_shinkansenSignals.Signals.DEBARK],confirm=_ref6$redirect[_shinkansenSignals.Signals.CONFIRM],history=_ref6.history;log('`redirectTo`');if(alpha&&omega){redirectToOmega({alpha:alpha,omega:omega,history:history});}else if(embark){redirectToEmbark({embark:embark,history:history});}else if(debark){redirectToDebark({debark:debark,history:history});}else if(confirm){redirectToDebark({confirm:confirm,history:history});}else if(alpha){redirectToAlpha({alpha:alpha,history:history});}else if(omega){throw Error('Pantograph encountered a route error in `redirectTo()`');}}function redirectFromAlpha(_ref7){var _ref7$state=_ref7.state;_ref7$state=_ref7$state===void 0?{}:_ref7$state;var _ref7$state$Signals$A=_ref7$state[_shinkansenSignals.Signals.ALPHA];_ref7$state$Signals$A=_ref7$state$Signals$A===void 0?{}:_ref7$state$Signals$A;var redirect=_ref7$state$Signals$A.redirect,history=_ref7.history;log('redirectFromAlpha()');if(redirect)redirectTo({redirect:redirect,history:history});}function redirectFromOmega(_ref8){var _ref8$state=_ref8.state;_ref8$state=_ref8$state===void 0?{}:_ref8$state;var _ref8$state$Signals$O=_ref8$state[_shinkansenSignals.Signals.OMEGA];_ref8$state$Signals$O=_ref8$state$Signals$O===void 0?{}:_ref8$state$Signals$O;var redirect=_ref8$state$Signals$O.redirect,history=_ref8.history;log('redirectFromOmega()');if(redirect)redirectTo({redirect:redirect,history:history});}function redirectFromEmbark(_ref9){var _ref9$state=_ref9.state;_ref9$state=_ref9$state===void 0?{}:_ref9$state;var _ref9$state$Signals$E=_ref9$state[_shinkansenSignals.Signals.EMBARK];_ref9$state$Signals$E=_ref9$state$Signals$E===void 0?{}:_ref9$state$Signals$E;var redirect=_ref9$state$Signals$E.redirect,history=_ref9.history;log('redirectFromEmbark()');if(redirect)redirectTo({redirect:redirect,history:history});}function redirectFromDebark(_ref10){var _ref10$state=_ref10.state;_ref10$state=_ref10$state===void 0?{}:_ref10$state;var _ref10$state$Signals$=_ref10$state[_shinkansenSignals.Signals.DEBARK];_ref10$state$Signals$=_ref10$state$Signals$===void 0?{}:_ref10$state$Signals$;var redirect=_ref10$state$Signals$.redirect,history=_ref10.history;log('redirectFromDebark()');if(redirect)redirectTo({redirect:redirect,history:history});}function redirectFromConfirm(_ref11){var _ref11$state=_ref11.state;_ref11$state=_ref11$state===void 0?{}:_ref11$state;var _ref11$state$Signals$=_ref11$state[_shinkansenSignals.Signals.CONFIRM];_ref11$state$Signals$=_ref11$state$Signals$===void 0?{}:_ref11$state$Signals$;var redirect=_ref11$state$Signals$.redirect,history=_ref11.history;log('redirectFromConfirm()');if(redirect)redirectTo({redirect:redirect,history:history});}function graphite(_ref12){var _ref12$action=_ref12.action;_ref12$action=_ref12$action===void 0?ACTION:_ref12$action;var type=_ref12$action.type,_ref12$state=_ref12.state,state=_ref12$state===void 0?STATE:_ref12$state,_ref12$history=_ref12.history,history=_ref12$history===void 0?HISTORY:_ref12$history;switch(type){case OMEGA.ROUTE:redirectFromOmega({state:state,history:history});break;case EMBARK.ROUTE:redirectFromEmbark({state:state,history:history});break;case DEBARK.ROUTE:redirectFromDebark({state:state,history:history});break;case CONFIRM.ROUTE:redirectFromDebark({state:state,history:history});break;case ALPHA.ROUTE:redirectFromAlpha({state:state,history:history});break;}}var Pantograph=function(){function Pantograph(){_classCallCheck(this,Pantograph);}_createClass(Pantograph,null,[{key:"ALPHA",get:function get(){return ALPHA;}},{key:"OMEGA",get:function get(){return OMEGA;}},{key:"EMBARK",get:function get(){return EMBARK;}},{key:"DEBARK",get:function get(){return DEBARK;}},{key:"CONFIRM",get:function get(){return CONFIRM;}}]);return Pantograph;}();_defineProperty(Pantograph,"graphite",graphite);var _default=Object.freeze(Pantograph);exports["default"]=_default;